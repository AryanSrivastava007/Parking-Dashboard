<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Parking Management Dashboard</title>

  <!-- Tailwind for styling -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Your custom styles -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="bg-gray-100 text-gray-900">
  <div class="container mx-auto p-4 sm:p-8 max-w-6xl">
    <h1 class="text-3xl font-bold text-gray-800 mb-6 pb-2 border-b border-gray-300">
      Parking Management Dashboard
    </h1>

    <!-- <div id="api-hint"
         class="mb-4 text-sm text-amber-800 bg-amber-100 border border-amber-200 rounded p-3">
      <strong>Note:</strong> Frontend calls <code id="api-base"></code>. If requests fail with
      <em>Failed to fetch</em>, check that your Django server is running, the base URL matches
      your backend (e.g., <code>/api/</code>), and CORS is configured for this origin during local dev.
    </div> -->

    <!-- Notification Toast -->
    <div id="toast"
         class="fixed top-5 right-5 z-50 hidden bg-green-500 text-white px-4 py-3 rounded shadow-md transition-opacity duration-300">
    </div>

    <!-- Navigation Tabs -->
    <nav id="nav-tabs" class="mb-6 bg-white rounded-lg shadow-sm">
      <div class="flex border-b border-gray-200">
        <button class="tab-button active text-sm sm:text-base font-medium py-3 px-4 text-gray-600 border-b-2 border-transparent hover:text-blue-500 transition duration-150 ease-in-out" data-page="page-companies">Companies</button>
        <button class="tab-button text-sm sm:text-base font-medium py-3 px-4 text-gray-600 border-b-2 border-transparent hover:text-blue-500 transition duration-150 ease-in-out" data-page="page-lots">Parking Lots</button>
        <button class="tab-button text-sm sm:text-base font-medium py-3 px-4 text-gray-600 border-b-2 border-transparent hover:text-blue-500 transition duration-150 ease-in-out" data-page="page-slots">Parking Slots</button>
        <button class="tab-button text-sm sm:text-base font-medium py-3 px-4 text-gray-600 border-b-2 border-transparent hover:text-blue-500 transition duration-150 ease-in-out" data-page="page-vehicles">Vehicles</button>
        <button class="tab-button text-sm sm:text-base font-medium py-3 px-4 text-gray-600 border-b-2 border-transparent hover:text-blue-500 transition duration-150 ease-in-out" data-page="page-bookings">Bookings</button>
      </div>
    </nav>

    <!-- Main Content -->
    <main>
      <!-- Companies -->
      <section id="page-companies" class="tab-content active space-y-6">
        <div class="bg-white p-6 rounded-lg shadow-sm">
          <h2 class="text-xl font-semibold mb-4">Manage Companies</h2>
          <form id="form-company">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
              <div class="form-group">
                <label for="company-name" class="block text-sm font-medium text-gray-700 mb-1">Company Name</label>
                <input type="text" id="company-name" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required />
                <input type="hidden" id="company-id" />
              </div>
              <button type="submit"
                      class="w-full md:w-auto bg-blue-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-blue-700 transition duration-150 h-10">
                Save Company
              </button>
            </div>
          </form>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-sm">
          <h3 class="text-lg font-semibold mb-4">Existing Companies</h3>
          <ul id="list-companies" class="space-y-3"></ul>
        </div>
      </section>

      <!-- Parking Lots -->
      <section id="page-lots" class="tab-content space-y-6">
        <div class="bg-white p-6 rounded-lg shadow-sm">
          <h2 class="text-xl font-semibold mb-4">Manage Parking Lots</h2>
          <form id="form-lot">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
              <div class="form-group">
                <label for="lot-name" class="block text-sm font-medium text-gray-700 mb-1">Lot Name</label>
                <input type="text" id="lot-name" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required />
              </div>
              <div class="form-group">
                <label for="lot-company" class="block text-sm font-medium text-gray-700 mb-1">Company</label>
                <select id="lot-company" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required></select>
              </div>
              <button type="submit"
                      class="w-full md:w-auto bg-blue-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-blue-700 transition duration-150 h-10">
                Add Parking Lot
              </button>
            </div>
          </form>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-sm">
          <h3 class="text-lg font-semibold mb-4">Existing Parking Lots</h3>
          <ul id="list-lots" class="space-y-3"></ul>
        </div>
      </section>

      <!-- Parking Slots -->
      <section id="page-slots" class="tab-content space-y-6">
        <div class="bg-white p-6 rounded-lg shadow-sm">
          <h2 class="text-xl font-semibold mb-4">Manage Parking Slots</h2>
          <form id="form-slot">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
              <div class="form-group">
                <label for="slot-name" class="block text-sm font-medium text-gray-700 mb-1">Slot Name (e.g., A1)</label>
                <input type="text" id="slot-name" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required />
              </div>
              <div class="form-group">
                <label for="slot-lot" class="block text-sm font-medium text-gray-700 mb-1">Parking Lot</label>
                <select id="slot-lot" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required></select>
              </div>
              <button type="submit"
                      class="w-full md:w-auto bg-blue-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-blue-700 transition duration-150 h-10">
                Add Slot
              </button>
            </div>
          </form>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-sm">
          <h3 class="text-lg font-semibold mb-4">Existing Parking Slots</h3>
          <ul id="list-slots" class="space-y-3"></ul>
        </div>
      </section>

      <!-- Vehicles -->
      <section id="page-vehicles" class="tab-content space-y-6">
        <div class="bg-white p-6 rounded-lg shadow-sm">
          <h2 class="text-xl font-semibold mb-4">Manage Vehicles</h2>
          <form id="form-vehicle">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
              <div class="form-group">
                <label for="vehicle-number" class="block text-sm font-medium text-gray-700 mb-1">License Plate</label>
                <input type="text" id="vehicle-number" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required />
              </div>
              <button type="submit"
                      class="w-full md:w-auto bg-blue-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-blue-700 transition duration-150 h-10">
                Add Vehicle
              </button>
            </div>
          </form>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-sm">
          <h3 class="text-lg font-semibold mb-4">Existing Vehicles</h3>
          <ul id="list-vehicles" class="space-y-3"></ul>
        </div>
      </section>

      <!-- Bookings -->
      <section id="page-bookings" class="tab-content space-y-6">
        <div class="bg-white p-6 rounded-lg shadow-sm">
          <h2 class="text-xl font-semibold mb-4">Manage Bookings</h2>
          <form id="form-booking">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-end">
              <div class="form-group">
                <label for="booking-vehicle" class="block text-sm font-medium text-gray-700 mb-1">Vehicle</label>
                <select id="booking-vehicle" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required></select>
              </div>
              <div class="form-group">
                <label for="booking-slot" class="block text-sm font-medium text-gray-700 mb-1">Available Parking Slot</label>
                <select id="booking-slot" class="w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500" required></select>
              </div>
              <button type="submit"
                      class="w-full md:w-auto bg-blue-600 text-white py-2 px-4 rounded-md shadow-sm hover:bg-blue-700 transition duration-150 h-10">
                Create Booking
              </button>
            </div>
          </form>
        </div>

        <div class="bg-white p-6 rounded-lg shadow-sm">
          <h3 class="text-lg font-semibold mb-4">All Bookings</h3>
          <ul id="list-bookings" class="space-y-3"></ul>
        </div>
      </section>
    </main>
  </div>

  <!-- Templates -->
  <template id="template-company">
    <li class="flex flex-col sm:flex-row justify-between sm:items-center p-4 border border-gray-200 rounded-md">
      <span class="text-gray-800 break-words mb-2 sm:mb-0">
        <span data-name class="font-medium"></span>
      </span>
      <div class="actions flex-shrink-0 space-x-2">
        <button class="update-btn text-sm bg-yellow-500 text-white py-1 px-3 rounded-md hover:bg-yellow-600 transition">Edit</button>
        <button class="delete-btn text-sm bg-red-500 text-white py-1 px-3 rounded-md hover:bg-red-600 transition">Delete</button>
      </div>
    </li>
  </template>

  <template id="template-lot">
    <li class="flex flex-col sm:flex-row justify-between sm:items-center p-4 border border-gray-200 rounded-md">
      <span class="text-gray-800 break-words">
        <span data-name class="font-medium"></span>
      </span>
    </li>
  </template>

  <template id="template-slot">
    <li class="flex flex-col sm:flex-row justify-between sm:items-center p-4 border border-gray-200 rounded-md">
      <span class="text-gray-800 break-words">
        Slot: <span data-name class="font-medium"></span>
      </span>
      <span data-status class="font-medium text-sm px-2 py-0.5 rounded-full"></span>
    </li>
  </template>

  <template id="template-vehicle">
    <li class="flex flex-col sm:flex-row justify-between sm:items-center p-4 border border-gray-200 rounded-md">
      <span class="text-gray-800 break-words">
        License: <span data-number class="font-medium"></span>
      </span>
    </li>
  </template>

  <template id="template-booking">
    <li class="p-4 border border-gray-200 rounded-md">
      <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-2">
        <span data-title class="text-gray-800 font-medium">Booking</span>
        <span data-status class="font-medium text-sm px-2 py-0.5 rounded-full mt-1 sm:mt-0"></span>
      </div>
      <div class="text-sm text-gray-600 space-y-1">
        <p><strong>Start:</strong> <span data-start></span></p>
        <p><strong>End:</strong> <span data-end></span></p>
      </div>
      <div class="actions mt-3 space-x-2">
        <button class="update-btn text-sm bg-green-500 text-white py-1 px-3 rounded-md hover:bg-green-600 transition">End Booking</button>
        <button class="delete-btn text-sm bg-red-500 text-white py-1 px-3 rounded-md hover:bg-red-600 transition">Delete</button>
      </div>
    </li>
  </template>

  <!-- App JS -->
  <script src="app.js"></script>
</body>
</html>